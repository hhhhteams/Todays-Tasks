<script src="https://hhhhteams.sharepoint.com/sites/HHHHTeams/Style%20Library/js/angular/Todays%20Tasks/TodayTask.js?updated=08/01/2019"></script>
<script src="https://hhhhteams.sharepoint.com/sites/HHHHTeams/Style%20Library/js/angular/Services/alasql.min.js"></script>
<style>

</style>
<div ng-controller="TodaysTasksController" ng-cloak>
    <div class="row Doc-align">
        <div class="col-sm-2">Search in all tasks:</div>
        <div class="col-sm-5 PadR0">
            <input id="searchinput" type="search" ng-model="globalSearch" placeholder="Search all..." class="form-control searchbox_height">
            <span class="searchclear" ng-click="clearControl('searchinput')">X</span>
        </div>
        <div class="col-sm-2 no-padding">
            Showing {{filteredItems.length}} of {{AllSitesTasks.length}} Tasks
        </div>

        <div class="col-sm-1 no-padding">
            <a class="hreflink" onclick="check()" data-ng-click="ClearFilters()" class="pull-right">Clear All <img ng-src="/_layouts/images/delete.gif"></a>
        </div>
        <div class="col-sm-1">
            <span>
                <img class="pull-right hreflink" ng-src="https://hhhhteams.sharepoint.com/sites/HHHHTeams/SiteCollectionImages/ICONS/24/icon_excel.png" ng-click="exportToExcel()" src="https://hhhhteams.sharepoint.com/sites/HHHHTeams/SiteCollectionImages/ICONS/24/icon_excel.png">
            </span>
        </div>
        <div class="col-sm-1">
            <button type="button" class="btn btn-primary pull-right searchbox_height" ng-click="StatusCompleted()">Update Tasks</button>
        </div>

    </div>

    <div id="table-wrapper" class="section-event pt-0">
        
            <ul class="table table-hover" cellspacing="0" width="100%">
                
                    <li class="for-lis">
                        <div style="width:7%;">
                            <div style="width:80%;">
                                <input id="Priority" style="font-weight:normal;" type="search" placeholder="Site" class="width-90 searchbox_height" ng-model="searchsiteType" />
                                <span class="searchclear" ng-click="clearControl('searchsiteType')">X</span>
                                <span class="{{orderBy=='siteType'&&!reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-up direction-arrow arrow_up" ng-click="sortBy('siteType', false)"></span>
                                <span class="{{orderBy=='siteType'&&reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-down direction-arrow arrow_down" ng-click="sortBy('siteType', true)"></span>
                            </div>
                        </div>
                        <div style="width:5%;"><div style="width:80%;"></div></div>
                        <div style="width:9%;">
                            <div style="width:80%;">
                                <input type="search" id="searchCategory" placeholder="Category" class="width-90 searchbox_height" ng-model="searchCategory" />
                                <span class="searchclear" ng-click="clearControl('searchCategory')">X</span>
                                <span class="{{orderBy=='TaskCompanies'&&!reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-up direction-arrow arrow_up" ng-click="sortBy('TaskCompanies', false)"></span>
                                <span class="{{orderBy=='TaskCompanies'&&reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-down direction-arrow arrow_down" ng-click="sortBy('TaskCompanies', true)"></span>
                            </div>
                        </div>
                        <div style="width:30%;">
                            <div style="width:80%;">
                                <input type="search" id="searchTitle" placeholder="Task Name" class="width-90 searchbox_height" ng-model="searchTitle" />
                                <span class="searchclear" ng-click="clearControl('searchTitle')">X</span>
                                <span class="{{orderBy=='Title'&&!reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-up direction-arrow arrow_up" ng-click="sortBy('Title', false)"></span>
                                <span class="{{orderBy=='Title'&&reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-down direction-arrow arrow_down" ng-click="sortBy('Title', true)"></span>
                            </div>
                        </div>
                        <div style="width:6%;">
                            <div style="width:80%;">
                                <input id="searchStatus" type="search" placeholder="%age" class="width-90 searchbox_height" ng-model="searchStatus" />
                                <span class="searchclear" ng-click="clearControl('searchStatus')">X</span>
                                <span class="{{orderBy=='PercentComplete'&&!reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-up direction-arrow arrow_up" ng-click="sortBy('PercentComplete', false)"></span>
                                <span class="{{orderBy=='PercentComplete'&&reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-down direction-arrow arrow_down" ng-click="sortBy('PercentComplete', true)"></span>
                            </div>
                        </div>
                        <div style="width:7%;">
                            <div style="width:80%;">
                                <input id="searchPriorityRank" type="search" placeholder="Priority" class="width-90 searchbox_height" ng-model="searchPriorityRank" />
                                <span class="searchclear" ng-click="clearControl('searchPriorityRank')">X</span>
                                <span class="{{orderBy=='Priority_x0020_Rank'&&!reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-up direction-arrow arrow_up" ng-click="sortBy('Priority_x0020_Rank', false)"></span>
                                <span class="{{orderBy=='Priority_x0020_Rank'&&reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-down direction-arrow arrow_down" ng-click="sortBy('Priority_x0020_Rank', true)"></span>
                            </div>
                        </div>
                        <div style="width:9%;">
                            <div style="width:80%;">
                                <input id="searchMileage" type="search" placeholder="Mileage" class="width-90 searchbox_height" ng-model="searchMileage" />
                                <span class="searchclear" ng-click="clearControl('searchMileage')">X</span>
                                <span class="{{orderBy=='Mileage'&&!reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-up direction-arrow arrow_up" ng-click="sortBy('Mileage', false)"></span>
                                <span class="{{orderBy=='Mileage'&&reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-down direction-arrow arrow_down" ng-click="sortBy('Mileage', true)"></span>
                            </div>
                        </div>
                        <div style="width:10%;">
                            <div style="width:80%;">
                                <input id="searchAssignedTo" type="search" placeholder="Assigned To" class="width-90 searchbox_height" ng-model="searchAssignedTo" />
                                <span class="searchclear" ng-click="clearControl('searchAssignedTo')">X</span>
                                <span class="{{orderBy=='AssignedTo'&&!reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-up direction-arrow arrow_up" ng-click="sortBy('AssignedTo', false)"></span>
                                <span class="{{orderBy=='AssignedTo'&&reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-down direction-arrow arrow_down" ng-click="sortBy('AssignedTo', true)"></span>
                            </div>
                        </div>

                        <div style="width:8%;">
                            <div style="width:80%;">
                                <input id="searchDuedate" type="search" placeholder="Due Date" class="width-90 searchbox_height" ng-model="searchDuedate" />
                                <span class="searchclear" ng-click="clearControl('searchDuedate')">X</span>
                                <span class="{{orderBy=='DateTaskDueDate'&&!reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-up direction-arrow arrow_up" ng-click="sortBy('DateTaskDueDate', false)"></span>
                                <span class="{{orderBy=='DateTaskDueDate'&&reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-down direction-arrow arrow_down" ng-click="sortBy('DateTaskDueDate', true)"></span>
                            </div>
                        </div>
                        <div style="width:9%;">
                            <div style="width:80%;">
                                <input id="searchAuthor" type="search" placeholder="Created By" class="width-90 searchbox_height" ng-model="searchAuthor" />
                                <span class="searchclear" ng-click="clearControl('searchAuthor')">X</span>
                                <span class="{{orderBy=='Author.Title'&&!reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-up direction-arrow arrow_up" ng-click="sortBy('Author.Title', false)"></span>
                                <span class="{{orderBy=='Author.Title'&&reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-down direction-arrow arrow_down" ng-click="sortBy('Author.Title', true)"></span>
                            </div>
                        </div>
                        
                    </li>
                
                <div class="container-new">
                    <li class="tdrows for-lis" ng-repeat="item in filteredItems = (AllSitesTasks | filter:globalSearch | orderBy:orderBy:reverse
                                            | filter:{Title:searchTitle, TaskDueDate:searchDuedate, siteType:searchsiteType, TaskCompanies:searchCategory, CustomStatus: searchStatus,Priority_x0020_Rank:searchPriorityRank} | filter:filterAssignedTo | filter:filterAuthor)">
                        <div style="width:7%;">

                            <input ng-model="item.IsTodaysTask" type="checkbox" ng-click="IsRemoveTask(item)" />
                            <span ng-if="item.siteType=='EI'"><img class="todaytask_img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_ei.png"></span>
                            <span ng-if="item.siteType=='DRR'"><img class="todaytask_img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_drr.png"></span>
                            <span ng-if="item.siteType=='EPS'"><img class="todaytask_img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_eps.png"></span>
                            <span ng-if="item.siteType=='Education'"><img class="todaytask_img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_education.png"></span>
                            <span ng-if="item.siteType=='Gender'"><img class="todaytask_img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_gender.png"></span>
                            <span ng-if="item.siteType=='Health'"><img class="todaytask_img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_health.png"></span>
                            <span ng-if="item.siteType=='QA'"><img class="todaytask_img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_qa.png"></span>
                            <span ng-if="item.siteType=='Shareweb'"><img class="todaytask_img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_shareweb.png"></span>
                            <span ng-if="item.siteType=='HHHH'"><img class="todaytask_img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Foundation/icon_hhhh.png"></span>
                            <span ng-if="item.siteType=='Foundation'" class="todaytask_img"><img ng-src="{{baseUrl}}"></span>
                            <span ng-if="item.siteType=='DE'"><img class="todaytask_img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_de.png"></span>
                            <span ng-if="item.siteType=='Small Projects'"><img class="todaytask_img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/small_project.png"></span>
                            <span ng-if="item.siteType=='Gruene'"><img class="todaytask_img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Foundation/logo-gruene.png"></span>
                        </div>
                        <div style="width:5%;" class="padLR">
                            <img ng-if="item.Priority=='(3) Low'" style="width:18px;" title="Priority: Low" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/32/icon_Low.png">
                            <img ng-if="item.Priority=='(1) High'" title="Priority: High" style="width:18px;" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/32/icon_High.png">
                            <img ng-show="item.Attachments" ng-src="/_layouts/15/images/attach16.png?rev=23">
                        </div>
                        <div style="width:9%;" class="padLR" ng-if="isMemberOwner==true" ng-click="EditTask(item)">{{item.TaskCompanies}}</div>
                        <div style="width:31%;" class="padLR" ng-if="item.Status =='Completed' && isMemberOwner==true" ng-click="EditTask(item)"><strike>{{item.Title}} </strike></div>
                        <div style="width:31%;" class="padLR" ng-if="item.Status !='Completed' && isMemberOwner==true" ng-click="EditTask(item)">{{item.Title}}</div>
                        <div style="width:6%;" class="padLR" ng-if="isMemberOwner==true" ng-click="EditTask(item)">{{item.PercentComplete}}%</div>
                        <div style="width:8%;" class="padLR" ng-if="isMemberOwner==true" ng-click="EditTask(item)">{{item.Priority_x0020_Rank}}</div>
                        <div style="width:8%;" class="padLR" ng-if="isMemberOwner==true" ng-click="EditTask(item)">{{item.Mileage}}</div>
                        <div style="width:10%;" class="padLR" ng-if="isMemberOwner==true" ng-click="EditTask(item)">{{getMultiUserValues(item)}}</div>

                        <div style="width:8%;" class="padLR" ng-if="isMemberOwner==true" ng-click="EditTask(item)">
                            <img ng-if="item.TrackTask=='On Track'" style="width:12px;" title="On Track" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/24/Gdot.png">
                            <img ng-if="item.TrackTask=='Slightly Off Track'" style="width:12px;" title="Slightly Off Track" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/24/Ydot.png">
                            <img ng-if="item.TrackTask=='Off Track'" style="width:12px;" title="Off Track" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/24/Rdot.png">
                            {{item.TaskDueDate}}
                        </div>
                        <div style="width:8%;" class="padLR" ng-if="isMemberOwner==true" ng-click="EditTask(item)">{{item.Author.Title}}</div>

                    </li>
                </div>
            </ul>
        
    </div>
    <shareweb-progress-bar progressbarid="'showSmartMetaSearchTaskprogressbar'"></shareweb-progress-bar>
</div>
